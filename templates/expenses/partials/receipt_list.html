<div class="d-flex flex-wrap gap-2 align-items-center">
    {% for receipt in item.receipts.all %}
    <div class="receipt-file">
        <i class="bi bi-file-earmark-image text-primary"></i>
        <a href="{{ receipt.file.url }}" target="_blank" class="text-decoration-none small">{{ receipt.original_filename|truncatechars:20 }}</a>
        <button type="button" class="btn btn-sm btn-link text-danger p-0 ms-1"
                hx-post="{% url 'expenses:expense_delete_receipt' report.pk receipt.pk %}"
                hx-target="#receipts-{{ item.id }}"
                hx-swap="innerHTML"
                hx-confirm="Delete this receipt?">
            <i class="bi bi-x"></i>
        </button>
    </div>
    {% endfor %}

    {% if report.is_editable %}
    <div class="dropzone flex-grow-1" style="min-width: 150px; padding: 0.75rem;">
        <input type="file" name="receipts" accept="image/*,.pdf" multiple class="d-none"
               hx-post="{% url 'expenses:expense_upload_receipt' report.pk item.id %}"
               hx-target="#receipts-{{ item.id }}"
               hx-swap="innerHTML"
               hx-encoding="multipart/form-data"
               hx-trigger="change">
        <small class="text-muted" onclick="this.previousElementSibling.click()">
            <i class="bi bi-cloud-upload me-1"></i>Drop or click to upload
        </small>
    </div>
    {% endif %}
</div>

{% if item.paper_receipt_delivered %}
<div class="mt-2">
    <small class="text-success"><i class="bi bi-check-circle"></i> Paper receipt delivered</small>
</div>
{% endif %}
